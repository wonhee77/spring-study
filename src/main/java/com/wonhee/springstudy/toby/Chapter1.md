#1장 오브젝트와 의존 관계

스프링의 핵심가치는 자바의 객체 지향적인 관점을 살리는 것이다.  
그래서 오브젝트가 어떻게 생성되고 어떻게 관리되며 어떻게 다른 오브젝트와 관계를 맺는지 등에 대한 관심이 필요하다.  
디자인 패턴, 리팩토링, 테스트 코드 등의 기술과 지식이 필요하다.

## 1.1 초난감 DAO
### 요약
1.1장에서는 DAO를 통해 DB에 User데이터를 저장하고 가져오는 로직을 만들었다.  
DAO 내에 DB에 데이터를 add()하고 get()하는 메서드가 존재한다.  
그리고 static main method를 통해 System.out.println()으로 해당 로직을 테스트하고 있다.

### 용어
`DAO`(Data Access Object) : DB를 통해 데이터를 가져오거나 수정하는 역할을 하는 object

`자바 빈` : 자바 빈은 특정 규약에 따라 작성된 Java 객체이다. 자바 빈은 재사용 가능한 컴포넌트를 만들기 위한 자바 표준이다.  
데이터 저장, 데이터 전송, 여러 레이어 간의 정보 전달 용도로 사용되며 아래의 규칙을 지켜야한다.
1. 필드들을 property라고 부르고 private로 선언이 되어야한다. getter, setter를 이용해 접근을 해야한다.
2. public 접근 제어자의 기본 생성자를 가지고 있어야 한다.
3. Serializable 인터페이스를 구현해야 한다.

## 1.2 DAO의 분리
### 요약
객체 지향의 세계에서는 모든 것이 변한다. 소프트웨어에서 변화가 없으면 죽은 소프트웨어인 것이다.  
그렇기 때문에 항상 변화를 염두해두고 개발을 해야된다.  
변화에 대비하기 위해서는 변화하는 부분을 작게 남겨둬야한다.  
관심사가 같은 것 끼리는 모으고, 관심사가 다른 것은 떨어뜨리는 `관심사의 분리`가 필요하다.

 1.1장의 DAO의 add(), get() 메서드는 DB connection을 가져오는 부분을 공통으로 가지고 있다.  
따라서 관심사를 분리하기 위해 DB connection을 맺는 부분을 getConnection()이라는 메서드로 따로 분리한다.  
이렇게 되면 DB 종류가 바뀐다던지 로그인 정보가 바뀌더라도 한 곳에서만 수정을 하면 된다.  

기능을 추가하지는 않았지만 코드가 더 깔끔해졌고 변화에 더 잘 대응할 수 있는 코드가 되었다. 이를 `리팩토링`이라고 한다.  
 
메소드 추출을 통해 관심사를 분리했지만 해당 DAO의 코드를 바꾸지 않고서는 DB connection 방법을 바꿀 수 없다.  
N 고객사와 D 고객사에 DAO를 제공할 때 각각 다른 DB connection을 사용한다면 코드를 주지 않고서는 connection을 변경할 방법이 없다.  

이러한 상황은 상속을 통해 해결할 수 있다.  
getConnection() 메서드를 추상 메서드로 변경하면 DAO를 상속한 NDAO, DDAO를 생성하여 getConnection() 함수를 오버라이딩 할 수 있다.  
이 방법은 디자인 패턴 중 `템플릿 메소드 패턴`, `팩토리 메서드 패턴`를 사용한 것과 같다.



### 용어  
`디자인 패턴` : 소프트웨어 설계 시 자주 만나는 문제들을 해결하기 위해 사용하는 재사용 가능한 솔루션이다. 각 패턴에 대한 의도 파악이 중요하다.  

`템플릿 메소드 패턴`은 전체 흐름이 있는 가운데 특정 부분만 재정의한 함수를 통해 새로운 행동을 하게하는 패턴이다.  
위와 같은 경우는 DB 연결을 맺고, query를 작성하고, 결과를 전송하고, 결과를 받고 등의 여러 과정 중에 DB 연결을 맺는 부분을 재정의하였다.  
이 방법을 통해 중복코드를 줄일 수 있고 특정 부분만 재정의하여 변경에는 닫혀있고 변화에는 열려있는 open-close를 지킬 수 있다.

`팩토리 메서드 패턴`은 객체를 직접 생성하지 않고 팩토리에게 생성을 위임하여 생성하는 부분을 분리하는 패턴이다.  
위의 예제에서는 DAO의 서브 클래스인 NDAO, DDAO가 팩토리 역할을 하여 각각 다른 DB connection을 생성하고 있다.  
이 방법을 통해 객체 생성은 팩토리에게만 의존하기 때문에 클라이언트 입장에서는 구체화된 객체에 의존할 필요가 없다.  



